<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REAL OMNI Trading System - No Fake Metrics</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .disclaimer {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .disclaimer h3 {
            margin: 0 0 10px 0;
            color: #ffc107;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card h3 {
            margin: 0 0 15px 0;
            color: #ffc107;
            font-size: 1.2em;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric:last-child {
            border-bottom: none;
        }
        
        .metric-label {
            font-weight: 500;
        }
        
        .metric-value {
            font-weight: bold;
        }
        
        .positive {
            color: #28a745;
        }
        
        .negative {
            color: #dc3545;
        }
        
        .neutral {
            color: #6c757d;
        }
        
        .trades-table {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: bold;
            color: #ffc107;
        }
        
        .status {
            padding: 20px;
            text-align: center;
            font-size: 1.1em;
        }
        
        .loading {
            color: #ffc107;
        }
        
        .error {
            color: #dc3545;
        }
        
        .refresh-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px;
        }
        
        .refresh-btn:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ REAL OMNI Trading System</h1>
            <p>Actual Bybit Demo Account Data - No Fake Metrics</p>
            <button class="refresh-btn" onclick="loadData()">üîÑ Refresh Data</button>
        </div>
        
        <div class="disclaimer">
            <h3>‚ö†Ô∏è HONEST DISCLAIMER</h3>
            <p>This dashboard shows REAL trading data from an actual Bybit demo account. No fake 100% win rates or impossible returns. Past performance does not guarantee future results.</p>
        </div>
        
        <div id="status" class="status loading">
            Loading real trading data...
        </div>
        
        <div id="content" style="display: none;">
            <div class="grid">
                <div class="card">
                    <h3>üí∞ Account Balance</h3>
                    <div class="metric">
                        <span class="metric-label">Current Balance:</span>
                        <span class="metric-value" id="currentBalance">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Initial Balance:</span>
                        <span class="metric-value" id="initialBalance">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">P&L:</span>
                        <span class="metric-value" id="pnl">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">P&L %:</span>
                        <span class="metric-value" id="pnlPercent">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üìä Trading Statistics</h3>
                    <div class="metric">
                        <span class="metric-label">Total Trades:</span>
                        <span class="metric-value" id="totalTrades">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Winning Trades:</span>
                        <span class="metric-value positive" id="winningTrades">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Losing Trades:</span>
                        <span class="metric-value negative" id="losingTrades">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Win Rate:</span>
                        <span class="metric-value" id="winRate">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üíµ Profit & Loss</h3>
                    <div class="metric">
                        <span class="metric-label">Total Profit:</span>
                        <span class="metric-value positive" id="totalProfit">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Loss:</span>
                        <span class="metric-value negative" id="totalLoss">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Net P&L:</span>
                        <span class="metric-value" id="netPnl">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Active Positions:</span>
                        <span class="metric-value" id="activePositions">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîß System Status</h3>
                    <div class="metric">
                        <span class="metric-label">Trading Status:</span>
                        <span class="metric-value" id="tradingStatus">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Data Source:</span>
                        <span class="metric-value" id="dataSource">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Last Update:</span>
                        <span class="metric-value" id="lastUpdate">-</span>
                    </div>
                </div>
            </div>
            
            <div class="trades-table">
                <h3>üìà Recent Real Trades</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Symbol</th>
                            <th>Side</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Value</th>
                            <th>Fee</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="tradesTable">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        async function loadData() {
            try {
                document.getElementById('status').textContent = 'Loading real trading data...';
                document.getElementById('status').className = 'status loading';
                
                // Load metrics
                const metricsResponse = await fetch('http://localhost:10002/api/metrics');
                const metricsData = await metricsResponse.json();
                
                if (metricsData.success) {
                    const data = metricsData.data;
                    
                    // Update balance
                    document.getElementById('currentBalance').textContent = `$${data.currentCapital.toFixed(2)}`;
                    document.getElementById('initialBalance').textContent = `$${data.initialCapital.toFixed(2)}`;
                    document.getElementById('pnl').textContent = `$${data.pnl.toFixed(2)}`;
                    document.getElementById('pnl').className = `metric-value ${data.pnl >= 0 ? 'positive' : 'negative'}`;
                    document.getElementById('pnlPercent').textContent = `${data.pnlPercentage.toFixed(2)}%`;
                    document.getElementById('pnlPercent').className = `metric-value ${data.pnlPercentage >= 0 ? 'positive' : 'negative'}`;
                    
                    // Update trading stats
                    document.getElementById('totalTrades').textContent = data.totalTrades;
                    document.getElementById('winningTrades').textContent = data.winningTrades;
                    document.getElementById('losingTrades').textContent = data.losingTrades;
                    document.getElementById('winRate').textContent = `${data.winRate.toFixed(1)}%`;
                    
                    // Update P&L
                    document.getElementById('totalProfit').textContent = `$${data.totalProfit.toFixed(2)}`;
                    document.getElementById('totalLoss').textContent = `$${data.totalLoss.toFixed(2)}`;
                    document.getElementById('netPnl').textContent = `$${data.netPnl.toFixed(2)}`;
                    document.getElementById('netPnl').className = `metric-value ${data.netPnl >= 0 ? 'positive' : 'negative'}`;
                    document.getElementById('activePositions').textContent = data.activePositions;
                    
                    // Update system status
                    document.getElementById('tradingStatus').textContent = data.isTrading ? 'Active' : 'Stopped';
                    document.getElementById('tradingStatus').className = `metric-value ${data.isTrading ? 'positive' : 'neutral'}`;
                    document.getElementById('dataSource').textContent = data.dataSource;
                    document.getElementById('lastUpdate').textContent = new Date(data.lastUpdate).toLocaleString();
                }
                
                // Load trades
                const tradesResponse = await fetch('http://localhost:10002/api/trades');
                const tradesData = await tradesResponse.json();
                
                if (tradesData.success) {
                    const trades = tradesData.data.trades.slice(0, 10); // Show last 10 trades
                    const tableBody = document.getElementById('tradesTable');
                    tableBody.innerHTML = '';
                    
                    trades.forEach(trade => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${trade.orderId.substring(0, 8)}...</td>
                            <td>${trade.symbol}</td>
                            <td class="${trade.side === 'Buy' ? 'positive' : 'negative'}">${trade.side}</td>
                            <td>${trade.quantity}</td>
                            <td>$${trade.price.toFixed(6)}</td>
                            <td>$${trade.value.toFixed(2)}</td>
                            <td>$${trade.fee.toFixed(4)}</td>
                            <td>${new Date(trade.time).toLocaleString()}</td>
                        `;
                        tableBody.appendChild(row);
                    });
                }
                
                document.getElementById('status').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                
            } catch (error) {
                document.getElementById('status').textContent = `Error loading data: ${error.message}`;
                document.getElementById('status').className = 'status error';
            }
        }
        
        // Load data on page load
        loadData();
        
        // Auto-refresh every 30 seconds
        setInterval(loadData, 30000);
    </script>
</body>
</html>
